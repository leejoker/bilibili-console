#!/usr/bin/env ruby

require 'thor'
require_relative '../lib/bilibili_console'

# bilibili-console command line
class BiliConsole < Thor
  def self.exit_on_failure?
    true
  end

  desc 'login', 'login with qrcode'
  def login
    bc = BilibiliConsole.new
    puts bc.login
  end

  desc 'user', 'get user info'
  def user
    bc = BilibiliConsole.new
    user = bc.login_user_info
    puts <<~USER
      uid: #{user.uid}
      uname: #{user.uname}
      level: #{user.level_info}
    USER
  end
end

BiliConsole.start
